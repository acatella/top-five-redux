"use strict";angular.module("topFiveReduxApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("topFiveReduxApp").controller("MainCtrl",["$scope","$sce","redditService",function(a,b,c){function d(a,b,c){this.text=a,this.value=b,this.icon=c}a.refreshGifs=function(b,d){a.allposts=c.search({subreddit:b,range:d}).$promise.then(function(b){var c=[],d=b.data.children,e=0;a.messageVis="hidden";for(var f=0;f<d.length;f++)if(!d[f].data.domain.search("streamable")){e++;var g=d[f];c.push(g);var h=g.data.url.split("/"),i=h[h.length-1];g.commentLink="https://www.reddit.com"+g.data.permalink,g.thumbnail="https://cdn.streamable.com/image/"+i+".jpg",g.videoSource="https://cdn.streamable.com/video/mp4/"+i+".mp4",g.counter=e;var j=new Date(1e3*g.data.created);g.postDay=j.getDate(),g.postMonth=j.getMonth()+1,g.postYear=j.getFullYear()}0===c.length?(a.messageVis="",console.log(c.length)):a.messageVis="hidden",a.gifs=c})};var e=new d("Soccer","soccer","soccerIcon"),f=new d("NBA Basketball","nba","basketballIcon");a.subDropdown={selected:e,options:[f],visibility:"hidden",toggleVis:function(){"hidden"===this.visibility?this.visibility="visible":this.visibility="hidden"},changeSub:function(b,c){this.options.push(this.selected),this.options.splice(c,1),this.selected=b,a.refreshGifs(this.selected.value,a.rangeDropdown.selected.value),this.toggleVis()}};var g=new d("Past 24 Hours","today","clockIcon"),h=new d("Past Week","week","clockIcon"),i=new d("Past Month","month","clockIcon");a.rangeDropdown={selected:g,options:[h,i],visibility:"hidden",toggleVis:function(){"hidden"===this.visibility?this.visibility="visible":this.visibility="hidden"},changeSub:function(b,c){this.options.push(this.selected),this.options.splice(c,1),this.selected=b,a.refreshGifs(a.subDropdown.selected.value,this.selected.value),this.toggleVis()}},a.togglePlay=function(a){var b=$("video")[a],c=$("#mask"+a);b.paused?(c.addClass("mask-off"),b.play()):(b.pause(),c.removeClass("mask-off"))},a.trustSrc=function(a){return b.trustAsResourceUrl(a)}}]),angular.module("topFiveReduxApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("topFiveReduxApp").factory("redditService",["$resource",function(a){return a("https://www.reddit.com/r/:subreddit/top/.json?sort=top&t=:range",{},{search:{method:"GET",params:{subreddit:"soccer",range:"today"},isArray:!1}})}]),angular.module("topFiveReduxApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="post" ng-repeat="post in gifs"> <div class="meta-info"> <p class="video-number"><span class="hash">#</span>{{post.counter}}</p> <h2 class="post-title">{{post.data.title}}</h2> <p class="post-date">{{post.postMonth}}/{{post.postDay}}/{{post.postYear}}</p> <a class="comment-link" ng-href="{{post.commentLink}}" target="_blank"><span class="link-text">{{post.data.num_comments}} Comments</span><span class="new-tab-icon"></span></a> </div> <div class="video-container" ng-click="togglePlay($index)"> <div class="mask" id="mask{{$index}}"><div class="play-button"><div class="triangle-right"></div></div></div> <video id="video{{$index}}" loop preload="none" poster="{{post.thumbnail}}"> <source ng-src="{{trustSrc(post.videoSource)}}" type="video/mp4"> </source></video> </div> <div class="clearfix"></div> </div> <div class="message {{messageVis}}">Dang, looks like there\'s nothing to watch. Try another sport or time range.</div>')}]);